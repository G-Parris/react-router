import{w}from"./with-props-CDnYio8N.js";import{q as v,r as c,l as e}from"./chunk-KNED5TY2-B--Pu_Kb.js";import{s as p}from"./supabase-client-CQQklyuL.js";function E(){return[{title:"Editing Task"}]}const S=w(function(){const{id:n}=v(),[k,y]=c.useState(null),[b,l]=c.useState(null),[o,s]=c.useState(!0),[a,x]=c.useState({"task-name":"","task-description":"","task-due-date":"","task-priority":"Low"});c.useEffect(()=>{if(!n){l("Task ID is required"),s(!1);return}p.from("tasks").select("*").eq("id",n).single().then(({data:t,error:i})=>{i?l(i.message):(y(t),x({"task-name":t.taskName||"","task-description":t.taskDescription||"","task-due-date":t.taskDueDate||"","task-priority":t.taskPriority||"Low"})),s(!1)})},[n]);const r=t=>{const{name:i,value:u}=t.target;x(m=>({...m,[i]:u}))},f=async t=>{var g;t.preventDefault(),l(null),s(!0);const{"task-name":i,"task-description":u,"task-due-date":m,"task-priority":j}=a,N=new Date().toISOString(),h=(g=t.nativeEvent.submitter)==null?void 0:g.value;if(h==="delete"){const{error:d}=await p.from("tasks").delete().eq("id",n);if(d){l(d.message),s(!1);return}window.location.href="/react-router/"}else if(h==="update"){const{error:d}=await p.from("tasks").update({taskName:i,taskDescription:u,taskDueDate:m,taskPriority:j,updated_at:N}).eq("id",n);if(d){l(d.message),s(!1);return}window.location.href="/react-router/"}s(!1)};return o?e.jsx("div",{children:"Loading..."}):b?e.jsxs("div",{className:"text-red-500",children:["Error: ",b]}):k?e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:[" Edit Task: ",k.taskName]}),e.jsxs("form",{onSubmit:f,className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-black-700 font-bold",htmlFor:"task-name",children:"Title"}),e.jsx("input",{className:"border border-gray-300 rounded px-3 py-2 w-full",type:"text",name:"task-name",value:a["task-name"],onChange:r,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-black-700 font-bold",children:"Description"}),e.jsx("textarea",{className:"border border-gray-300 rounded px-3 py-2 w-full",name:"task-description",value:a["task-description"],onChange:r,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-black-700 font-bold",children:"Due Date"}),e.jsx("input",{className:"border border-gray-300 rounded px-3 py-2 w-full",type:"date",name:"task-due-date",value:a["task-due-date"],onChange:r,required:!0})]}),e.jsxs("div",{className:"mb-4 mt-4 border rounded border-gray-300 pt-2",children:[e.jsx("label",{className:"block text-black-700 font-bold border-b mb-2",children:"Priority:"}),e.jsx("input",{className:"mb-4 ml-1 accent-green-600",type:"radio",name:"task-priority",value:"Low",checked:a["task-priority"]==="Low",onChange:r,required:!0}),e.jsx("label",{className:"text-green-600 ml-2",children:"Low"}),e.jsx("br",{}),e.jsx("input",{className:"mb-4 ml-1 accent-blue-500",type:"radio",name:"task-priority",value:"Medium",checked:a["task-priority"]==="Medium",onChange:r,required:!0}),e.jsx("label",{className:"text-blue-600 ml-2",children:"Medium"}),e.jsx("br",{}),e.jsx("input",{className:"mb-4 ml-1 accent-yellow-700",type:"radio",name:"task-priority",value:"High",checked:a["task-priority"]==="High",onChange:r,required:!0}),e.jsx("label",{className:"text-yellow-500 ml-2",children:"High"}),e.jsx("br",{}),e.jsx("input",{className:"mb-4 ml-1 accent-orange-600",type:"radio",name:"task-priority",value:"Urgent",checked:a["task-priority"]==="Urgent",onChange:r,required:!0}),e.jsx("label",{className:"text-orange-600 ml-2",children:"Urgent"}),e.jsx("br",{}),e.jsx("input",{className:"ml-1 accent-red-500",type:"radio",name:"task-priority",value:"Critical",checked:a["task-priority"]==="Critical",onChange:r,required:!0}),e.jsx("label",{className:"text-red-600 ml-2",children:"Critical"})]}),e.jsx("button",{className:"bg-gray-500 text-white px-4 py-2 rounded mr-4 mt-2",type:"button",onClick:()=>window.history.back(),children:"Cancel"}),e.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded mr-4",value:"update",name:"intent",type:"submit",disabled:o,children:o?"Updating...":"Update Task"}),e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded",value:"delete",name:"intent",type:"submit",disabled:o,children:o?"Deleting...":"Delete Task"})]})]}):e.jsx("div",{children:"Task not found."})});export{S as default,E as meta};
